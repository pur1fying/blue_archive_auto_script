<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>i18n Guide | Blue Archive Auto Script</title>
    <meta name="description" content="用于实现蔚蓝档案自动化">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/blue_archive_auto_script/assets/style.2Tmlzn3L.css" as="style">
    <link rel="preload stylesheet" href="/blue_archive_auto_script/vp-icons.css" as="style">
    
    <script type="module" src="/blue_archive_auto_script/assets/app.CPndReKR.js"></script>
    <link rel="preload" href="/blue_archive_auto_script/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/chunks/theme.BSSaXJTL.js">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/chunks/framework.By2iWbs8.js">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/i18n.md.DJo0gh7r.lean.js">
    <link rel="icon" type="image/png" href="assets/logo.png">
    <meta name="author" content="pur1fying">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-7a2fb286><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9091a363></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9091a363> Skip to content </a><!--]--><!----><header class="VPNav" data-v-7a2fb286 data-v-12280eb3><div class="VPNavBar" data-v-12280eb3 data-v-e4f9aaa7><div class="wrapper" data-v-e4f9aaa7><div class="container" data-v-e4f9aaa7><div class="title" data-v-e4f9aaa7><div class="VPNavBarTitle" data-v-e4f9aaa7 data-v-04680ea6><a class="title" href="/blue_archive_auto_script/" data-v-04680ea6><!--[--><!--]--><!--[--><img class="VPImage logo" src="assets/logo.png" alt data-v-bbf817a4><!--]--><span data-v-04680ea6>Blue Archive Auto Script</span><!--[--><!--]--></a></div></div><div class="content" data-v-e4f9aaa7><div class="content-body" data-v-e4f9aaa7><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e4f9aaa7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e4f9aaa7 data-v-93f2cb40><span id="main-nav-aria-label" class="visually-hidden" data-v-93f2cb40> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blue_archive_auto_script/" tabindex="0" data-v-93f2cb40 data-v-e14629cf><!--[--><span data-v-e14629cf>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blue_archive_auto_script/usage_doc/downloads.html" tabindex="0" data-v-93f2cb40 data-v-e14629cf><!--[--><span data-v-e14629cf>下载</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e4f9aaa7 data-v-6443b82e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6443b82e data-v-5e0dcaa1 data-v-a1fde8bc><span class="check" data-v-a1fde8bc><span class="icon" data-v-a1fde8bc><!--[--><span class="vpi-sun sun" data-v-5e0dcaa1></span><span class="vpi-moon moon" data-v-5e0dcaa1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e4f9aaa7 data-v-2cf27e92 data-v-fab29f3d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/pur1fying/blue_archive_auto_script" aria-label="github" target="_blank" rel="noopener" data-v-fab29f3d data-v-59b38322><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://space.bilibili.com/259089751/upload/opus" aria-label="assets/Bilibili.svg" target="_blank" rel="noopener" data-v-fab29f3d data-v-59b38322><span class="vpi-social-assets/Bilibili.svg"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e4f9aaa7 data-v-7cc2b742 data-v-423e8205><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-423e8205><span class="vpi-more-horizontal icon" data-v-423e8205></span></button><div class="menu" data-v-423e8205><div class="VPMenu" data-v-423e8205 data-v-cbd13543><!----><!--[--><!--[--><!----><div class="group" data-v-7cc2b742><div class="item appearance" data-v-7cc2b742><p class="label" data-v-7cc2b742>Appearance</p><div class="appearance-action" data-v-7cc2b742><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-7cc2b742 data-v-5e0dcaa1 data-v-a1fde8bc><span class="check" data-v-a1fde8bc><span class="icon" data-v-a1fde8bc><!--[--><span class="vpi-sun sun" data-v-5e0dcaa1></span><span class="vpi-moon moon" data-v-5e0dcaa1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-7cc2b742><div class="item social-links" data-v-7cc2b742><div class="VPSocialLinks social-links-list" data-v-7cc2b742 data-v-fab29f3d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/pur1fying/blue_archive_auto_script" aria-label="github" target="_blank" rel="noopener" data-v-fab29f3d data-v-59b38322><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://space.bilibili.com/259089751/upload/opus" aria-label="assets/Bilibili.svg" target="_blank" rel="noopener" data-v-fab29f3d data-v-59b38322><span class="vpi-social-assets/Bilibili.svg"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e4f9aaa7 data-v-354da422><span class="container" data-v-354da422><span class="top" data-v-354da422></span><span class="middle" data-v-354da422></span><span class="bottom" data-v-354da422></span></span></button></div></div></div></div><div class="divider" data-v-e4f9aaa7><div class="divider-line" data-v-e4f9aaa7></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-7a2fb286 data-v-e17001c3><div class="container" data-v-e17001c3><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e17001c3 data-v-a34b9898><button data-v-a34b9898>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-7a2fb286 data-v-5b8133ba><div class="VPDoc has-aside" data-v-5b8133ba data-v-585f9469><!--[--><!--]--><div class="container" data-v-585f9469><div class="aside" data-v-585f9469><div class="aside-curtain" data-v-585f9469></div><div class="aside-container" data-v-585f9469><div class="aside-content" data-v-585f9469><div class="VPDocAside" data-v-585f9469 data-v-4598472c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-4598472c data-v-f0fbf98e><div class="content" data-v-f0fbf98e><div class="outline-marker" data-v-f0fbf98e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f0fbf98e>On this page</div><ul class="VPDocOutlineItem root" data-v-f0fbf98e data-v-8b7e3804><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-4598472c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-585f9469><div class="content-container" data-v-585f9469><!--[--><!--]--><main class="main" data-v-585f9469><div style="position:relative;" class="vp-doc _blue_archive_auto_script_i18n" data-v-585f9469><div><h1 id="i18n-guide" tabindex="-1">i18n Guide <a class="header-anchor" href="#i18n-guide" aria-label="Permalink to &quot;i18n Guide&quot;">​</a></h1><h2 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to &quot;Requirements&quot;">​</a></h2><ul><li><a href="https://github.com/thurask/Qt-Linguist/releases" target="_blank" rel="noreferrer">Qt Linguist</a></li><li>[OPTIONAL]</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip install -r requirements-i18n.txt</span></span></code></pre></div><h2 id="translation" tabindex="-1">Translation <a class="header-anchor" href="#translation" aria-label="Permalink to &quot;Translation&quot;">​</a></h2><h3 id="adding-a-new-language" tabindex="-1">Adding a New Language <a class="header-anchor" href="#adding-a-new-language" aria-label="Permalink to &quot;Adding a New Language&quot;">​</a></h3><p>To include a new language, add a new member to the Language enum representing the language with its corresponding QLocale object. Then, update the combobox method to return a list of language names based on the enum members order. For example, to add Japanese:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>class Language(Enum):</span></span>
<span class="line"><span>    &quot;&quot;&quot; Language enumeration &quot;&quot;&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    CHINESE_SIMPLIFIED = QLocale(QLocale.Chinese, QLocale.China)</span></span>
<span class="line"><span>    ENGLISH = QLocale(QLocale.English, QLocale.UnitedStates)</span></span>
<span class="line"><span>    JAPANESE = QLocale(QLocale.Japanese, QLocale.Japan)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    def combobox():</span></span>
<span class="line"><span>        return [&#39;简体中文&#39;, &#39;English&#39;, &#39;日本語&#39;]</span></span></code></pre></div><p>Run the Python file; it will print the language acronym:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ja_JP</span></span></code></pre></div><p>Open <code>i18n.pro</code> and modify the <code>TRANSLATION</code> variable by appending <code>gui/i18n/</code> + acronym:</p><div class="language-pro vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pro</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>TRANSLATIONS += gui/i18n/en_US.ts \</span></span>
<span class="line"><span>        gui/i18n/ja_JP.ts \</span></span></code></pre></div><p>Execute the following command to generate <code>.ts</code> files:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pylupdate5 i18n.pro</span></span></code></pre></div><p>OPTIONAL: <code>auto_translate.py</code></p><p>Utilize <code>argostranslate</code> to accelerate translations after installing the necessary packages from <code>requirements-i18n.txt</code>. Note that while translations may not be perfect, they can speed up the process.</p><p>Simply create a new <code>Request</code> instance at the end of <code>auto_translate.py</code> and invoke its <code>process</code> method.</p><p>The <code>Request</code> constructor is as follows:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    from_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;zh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, handlers: list[Handler], language: Language, argos_model: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Parameters</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ----------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        handlers: list[Handler]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            a list of handlers that represent the files to translate. </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        language: Language</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            the memeber of the enum Language to translate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        argos_model: str </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            The argos model to load for translation</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span></code></pre></div><p>Then:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModelHandler()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> XmlHandler()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">descriptions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HtmlHandler()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request_jp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Request([model, ts, descriptions], Language.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JAPANESE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ja&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request_jp.process()</span></span></code></pre></div><p>This means that <code>.ts</code> and description files will be generated. You can adjust the list of handlers as needed, but <code>model</code> must always be the first element.</p><p>Also, in case no model exists for your language, you could create a new subclass of Request, override its translate method to use another Python library, and omit ModelHandler from the list of handlers.</p><p>Open <code>Qt Linguist</code>, load the <code>.ts</code> file, and manually translate. This step will require some time.</p><p>Afterward, navigate to <code>gui/i18n</code> and execute the following command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>lrelease ja_JP.ts</span></span></code></pre></div><p>This will produce the <code>.qm</code> files.</p><h2 id="baastranslator" tabindex="-1"><code>baasTranslator</code> <a class="header-anchor" href="#baastranslator" aria-label="Permalink to &quot;`baasTranslator`&quot;">​</a></h2><h3 id="problems" tabindex="-1">Problems <a class="header-anchor" href="#problems" aria-label="Permalink to &quot;Problems&quot;">​</a></h3><p>In normal scenarios, the <code>tr</code> method of <code>QObject</code> is used for translation, inherited by most PyQt5 classes. However, this approach isn&#39;t always possible for <code>baas</code> due to:</p><ul><li>Widget text being generated from JSON files</li><li>Need to retain user input (e.g., combobox selections) in Chinese within config files</li></ul><h3 id="solution" tabindex="-1">Solution <a class="header-anchor" href="#solution" aria-label="Permalink to &quot;Solution&quot;">​</a></h3><p>To address this:</p><ul><li><code>ConfigTranslation</code>: a <code>QObject</code> subclass with a dictionary attribute mapping text enclosed in <code>self.tr</code> to itself:</li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # display</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;每日特别委托&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;每日特别委托&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span></code></pre></div><ul><li><p>Utilize a specific instance of <code>QTranslator</code> named <code>baasTranslator</code> from <code>gui/util/translator.py</code> as <code>bt</code>, employing its methods:</p><ul><li><code>tr(context, sourceText)</code></li><li><code>undo(text)</code></li></ul></li></ul><p>For instance, <code>bt.tr(&#39;ConfigTranslation&#39;, &#39;国际服&#39;)</code> will produce its translation, &#39;Global&#39;, and <code>bt.undo(&#39;Global&#39;)</code> will revert it to &#39;国际服&#39;. This functionality is already implemented in <code>get</code> and <code>set</code> method of <code>ConfigSet</code>.</p><p>In essence, <code>tr</code> accesses the <code>.qm</code> file to retrieve translations based on the <code>ConfigTranslation</code> context, while <code>undo</code> retrieves the value from the mapped dictionary where the translation was stored.</p><p>Note that contexts other than <code>&#39;ConfigTranslation&#39;</code> are accessible. For example:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        configItems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;一键反和谐&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;selection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fhx,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">configItems, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config)</span></span></code></pre></div><p>Suppose you want to translate the <code>label</code> and <code>selection</code> but can&#39;t access the <code>tr</code> method directly since you must first invoke the parent constructor and wish to avoid extensive modifications. Here&#39;s a solution:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        OtherConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QObject()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        configItems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: OtherConfig.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;一键反和谐&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;selection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fhx,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">configItems, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OtherConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ol><li>Add a new <code>context</code> parameter to the <code>TemplateLayout</code> constructor.</li><li>Create an instance of <code>QObject</code> named <code>OtherConfig</code>. This establishes a new context when generating the <code>.ts</code> files, allowing you to pass <code>&#39;OtherConfig&#39;</code> to the <code>TemplateLayout</code> constructor.</li></ol><p>Now, accessing translations in <code>TemplateLayout</code> becomes straightforward:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">QWidget</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    patch_signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pyqtSignal(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, configItems: Union[list[ConfigItem], list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]], parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    labelComponent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QLabel(bt.tr(context, cfg.label), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="adding-new-gui-py-files" tabindex="-1">Adding new GUI .py files <a class="header-anchor" href="#adding-new-gui-py-files" aria-label="Permalink to &quot;Adding new GUI .py files&quot;">​</a></h2><p>Please ensure to include the file path of the new GUI .py files into the <code>i18n.pro</code> file&#39;s <code>SOURCES</code> variable, taking care to use the correct slashes. For instance, if you&#39;re adding <code>table.py</code> located in <code>gui/components</code>, it should be appended like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SOURCES += \</span></span>
<span class="line"><span>    gui/components/table.py \</span></span></code></pre></div><h2 id="adding-new-config-value" tabindex="-1">Adding new Config value <a class="header-anchor" href="#adding-new-config-value" aria-label="Permalink to &quot;Adding new Config value&quot;">​</a></h2><p>When adding a new config value that appears on the GUI and needs translation, update the <code>ConfigTranslation</code> dictionary by adding a new key-value pair. For comboboxes, make sure to include all options.</p></div></div></main><footer class="VPDocFooter" data-v-585f9469 data-v-08364996><!--[--><!--]--><div class="edit-info" data-v-08364996><!----><div class="last-updated" data-v-08364996><p class="VPLastUpdated" data-v-08364996 data-v-48a97e79>更新于: <time datetime="2025-02-02T04:31:52.000Z" data-v-48a97e79></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"develop_doc_develop.md\":\"B4hv21C9\",\"develop_doc_develop_format.md\":\"DfDmtC2A\",\"develop_doc_develop_guide.md\":\"Dmj69JKv\",\"develop_doc_docs.md\":\"D9bckRO0\",\"develop_doc_env.md\":\"x6H5JkK6\",\"develop_doc_log.md\":\"Dl-ZdfVi\",\"develop_doc_script_baas_thread.md\":\"Btpjb34m\",\"develop_doc_script_config.md\":\"DSf3on2U\",\"develop_doc_script_connection.md\":\"CtqM8X9P\",\"develop_doc_script_control.md\":\"BCUNnFfY\",\"develop_doc_script_device_operation.md\":\"CVTaWF6e\",\"develop_doc_script_game_feature.md\":\"xdmEKHgn\",\"develop_doc_script_image_compare.md\":\"Bgp9fPM9\",\"develop_doc_script_main.md\":\"CzXUq1KI\",\"develop_doc_script_nemu.md\":\"CRkxMWzt\",\"develop_doc_script_screenshot.md\":\"iAJJabyG\",\"i18n.md\":\"DJo0gh7r\",\"index.md\":\"BU96wBbx\",\"markdown-examples.md\":\"CvW0ebH2\",\"thanks.md\":\"D-6YExe8\",\"usage_doc_about.md\":\"CW-xciaA\",\"usage_doc_activity.md\":\"CsjA-ErH\",\"usage_doc_api-examples.md\":\"BNuAoOV-\",\"usage_doc_cli.md\":\"COhwdWjc\",\"usage_doc_config.md\":\"Dc6sKI4i\",\"usage_doc_destroyer.md\":\"D8FPeec2\",\"usage_doc_downloads.md\":\"CGn_6si6\",\"usage_doc_faq.md\":\"DdPYKbTM\",\"usage_doc_features.md\":\"vFyMAX_E\",\"usage_doc_guide.md\":\"7G36KEVM\",\"usage_doc_install_choose_platform.md\":\"C_I-VZkT\",\"usage_doc_install_windows.md\":\"_qysW8z5\",\"usage_doc_qq_group_regulation.md\":\"zV0qEHL8\",\"usage_doc_report.md\":\"DJ2K6qy-\",\"usage_doc_update.md\":\"5L3b2C6z\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Blue Archive Auto Script\",\"description\":\"用于实现蔚蓝档案自动化\",\"base\":\"/blue_archive_auto_script/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":[2,3],\"logo\":\"assets/logo.png\",\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"下载\",\"link\":\"/usage_doc/downloads\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/usage_doc/\":[{\"text\":\"用户文档\",\"items\":[{\"text\":\"特性\",\"link\":\"/usage_doc/features\"},{\"text\":\"下载\",\"link\":\"/usage_doc/downloads\"},{\"text\":\"安装教程\",\"link\":\"/usage_doc/install/choose_platform\"},{\"text\":\"配置\",\"link\":\"/usage_doc/config\"},{\"text\":\"常见问题\",\"link\":\"/usage_doc/faq\"},{\"text\":\"上报问题\",\"link\":\"/usage_doc/report\"},{\"text\":\"已知问题\",\"link\":\"/usage_doc/about\"},{\"text\":\"CLI用法\",\"link\":\"/usage_doc/CLI\"},{\"text\":\"QQ群规定\",\"link\":\"/usage_doc/qq_group_regulation\"},{\"text\":\"项目破坏者\",\"link\":\"/usage_doc/destroyer\"}]}],\"/develop_doc/\":[{\"text\":\"开发文档\",\"items\":[{\"text\":\"总览\",\"link\":\"/develop_doc/develop_guide\"},{\"text\":\"开发环境\",\"link\":\"/develop_doc/env\"},{\"text\":\"模拟器连接\",\"link\":\"/develop_doc/script/Connection\"},{\"text\":\"模拟器截图\",\"link\":\"/develop_doc/script/screenshot\"},{\"text\":\"模拟器控制\",\"link\":\"/develop_doc/script/control\"},{\"text\":\"Baas_thread\",\"link\":\"/develop_doc/script/Baas_thread\"},{\"text\":\"编写文档\",\"link\":\"/develop_doc/docs\"},{\"text\":\"模拟器开关/状态检测\",\"link\":\"/develop_doc/script/device_operation\"},{\"text\":\"配置详解\",\"link\":\"/develop_doc/script/config\"},{\"text\":\"开发约定\",\"link\":\"/develop_doc/develop_format\"},{\"text\":\"日志\",\"link\":\"/develop_doc/log\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/pur1fying/blue_archive_auto_script\"},{\"icon\":\"assets/Bilibili.svg\",\"link\":\"https://space.bilibili.com/259089751/upload/opus\"}],\"lastUpdated\":{\"text\":\"更新于\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>